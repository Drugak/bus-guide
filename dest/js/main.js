var BusRoute,BusRouteTableArray=[],busGuide=function(){function o(){for(var o="",t=0;t<BusRoute.length;t++)o+=Bus.template("busItemWidget",BusRoute[t],!0);$("#list-bus").removeClass("loading").html(o),$("li.js-bus-item").click(function(){$(this).toggleClass("open")})}function t(){BusRoute=JSON.parse(localStorage.getItem("routeData")),function(){for(var o=0;o<BusRoute.length;o++)BusRouteTableArray.push(BusRoute[o].routeNumber)}(),o()}function e(){var o,t=$(".js-search-input"),e=$(".js-cancel-search");e.on("click",function(){$("#list-bus > li").removeClass("i-none"),$(this).addClass("i-none"),t.val("")}),t.keyup(function(){return $("#list-bus > li").addClass("i-none"),e.removeClass("i-none"),""==t.val()?!1:(o=$.inArray(t.val(),BusRouteTableArray)+1,void $("#list-bus li:nth-child("+o+")").removeClass("i-none"))})}var n=function(){$.ajax("data/route.json").done(function(o){u(o)}).fail(function(){console.log("fail download route.json")})},u=function(o){localStorage.setItem("routeData",JSON.stringify(o)),t()};console.log("olol");var s=function(){localStorage.routeData?t():n()};s(),$("input.js-search-input").on("focus",function(){e()})};$(document).ready(function(){busGuide()});